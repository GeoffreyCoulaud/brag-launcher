# App info
app-id: com.github.geoffreycoulaud.gali
command: gali

# Sandbox info
runtime: org.gnome.Platform
runtime-version: '43'
sdk: org.gnome.Sdk

# Sources
modules:
  - python3-vdf.json
  - python3-pyyaml.json
  - python3-defusedxml.json
  - name: gali
    buildsystem: meson
    builddir: true
    sources: 
      - type: git
        path: "."

# Sandbox permissions
finish-args:
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --device=dri
  - --socket=wayland
  - --talk-name=org.freedesktop.Flatpak
  - --filesystem=home/.var/app/org.citra_emu.citra:ro
  - --filesystem=home/.var/app/org.DolphinEmu.dolphin-emu:ro
  - --filesystem=home/.var/app/org.ppsspp.PPSSPP:ro
  - --filesystem=home/.var/app/org.yuzu_emu.yuzu:ro
  - --filesystem=home/.var/app/com.heroicgameslauncher.hgl:ro
  - --filesystem=home/.var/app/com.valvesoftware.Steam:ro
  - --filesystem=home/.var/app/org.libretro.RetroArch:ro

# Files to remove at the end
# ? Purpose : slim down the bundle
cleanup:
  - /include
  - /lib/pkgconfig
  - /man
  - /share/doc
  - /share/gtk-doc
  - /share/man
  - /share/pkgconfig
  - "*.la"
  - "*.a"