# App info
app-id: com.github.geoffreycoulaud.gali
command: gali

# Sandbox info
runtime: org.gnome.Platform
runtime-version: '43'
sdk: org.gnome.Sdk

# Sources
modules:

  - name: python3-vdf
    sources: python3-vdf.json

  - name: python3-pyyaml
    sources: python3-pyyaml.json

  - name: python3-defusedxml
    sources: python3-defusedxml.json

  - name: gali
    sources: 
      - type: dir
        path: ../../gali
        builddir: true
        buildsystem: meson

# Sandbox permissions
finish-args:
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --device=dri
  - --socket=wayland
  - --talk-name=org.freedesktop.Flatpak
  - --filesystem=home/.var/app/org.citra_emu.citra:ro
  - --filesystem=home/.var/app/org.DolphinEmu.dolphin-emu:ro
  - --filesystem=home/.var/app/org.ppsspp.PPSSPP:ro
  - --filesystem=home/.var/app/org.yuzu_emu.yuzu:ro
  - --filesystem=home/.var/app/com.heroicgameslauncher.hgl:ro
  - --filesystem=home/.var/app/com.valvesoftware.Steam:ro
  - --filesystem=home/.var/app/org.libretro.RetroArch:ro

# Files to remove at the end
# ? Purpose : slim down the bundle
cleanup:
  - /include
  - /lib/pkgconfig
  - /man
  - /share/doc
  - /share/gtk-doc
  - /share/man
  - /share/pkgconfig
  - "*.la"
  - "*.a"